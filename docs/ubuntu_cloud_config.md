### Что такое cloud-init
Для того что бы избежать установки ОС и первичной ее настройки Canonical создало механизм cloud-init. Данный механизм позволяет при первой загрузке специально подготовленного образа прочитать конфигурацию ОС из файла и применить ее к текущему образу. Специально подготовленные образы, в которых установлены компоненты cloud-init и ОС подготовлена для настройки, можно скачать с официального репозитория ubuntu
Это очень удобно для экономии времени и позволяет нам полностью автоматизировать установку ОС и ее предварительную настройку

### Работа механизма
В проксмоксе реализовна нативная поддержка cloud-init, но она максимально обрезаная и дает нам настроить только самые бызовые прааметры, что естественно недостаточно.
Поэтому мы создаем текстовый файл в котором прописываем все нужные нам настройки. Этот файл мы монтируем в виртуальный дисковод и подключаем к созданной ВМ.

### Хранилище
Данный файл являетяся важной компонентой ВМ и должен надежно хранится в датасторе проксмоксе. Для этого в хранилище обязательно должна быть включена опция Snippet. Для использования в кластере хранилище должно быть общим. При переезде вм на другую ноду ВМ не запустится без доступа к данному файлу.

### Содержимое
Функция дата используется для получения какого либо значения из внешнего источника: Файла, вызова api и т.д

data "local_file" "ssh_public_key" {
  filename = "${var.ci_ssh_key}"
}
Данный парматер является обязательным и требуется для последущего подключения к вм. Если ключа нет по данному пути или он не валидный, то после установки к вм по ssh мы не подключимся
Мы используем функцию data для получения содержимого фала содержащего публичный ключ нашей вм. 
Опция filemane указывае на переменную которая содержит путь до файла с ключом. Подробнее про переменные в доке про переменные. 

Функция ресурс создает объект на основе его описания в виде параметров.
resource "proxmox_virtual_environment_file" "ubuntu_cloud_init" {
  count        = var.count_number
  content_type = "snippets"
  datastore_id = var.snippet_storage
  node_name    = var.node_name
Данная функция создает ресурс 